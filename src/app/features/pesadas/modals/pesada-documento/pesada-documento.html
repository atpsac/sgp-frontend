<div class="ux-modal">
  <div class="modal-header border-0 pb-0">
    <div>
      <h5 class="modal-title">{{ titulo }}</h5>
      <p class="modal-subtitle mb-0">
        Completa los campos para registrar un documento relacionado a la
        pesada. Se utilizará para calcular pesos y trazabilidad del ticket.
      </p>
    </div>

    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="cancelar()"
    ></button>
  </div>

  <div class="modal-body pt-3">
    <form [formGroup]="form" (ngSubmit)="guardar()" novalidate>
      <!-- Fila 1: socio, tipo documento (6 / 6) -->
      <div class="row g-3 mb-3">
        <!-- Socio de negocio -->
        <div class="col-lg-6 col-md-6 col-12">
          <label class="form-label mb-1 small text-muted">
            Socio de negocio *
          </label>
          <div class="ux-select">
            <select
              class="form-select ux-input"
              formControlName="socioNegocio"
            >
              <option value="">Selecciona un socio</option>
              <option
                *ngFor="let s of businessPartners"
                [value]="s.companyName"
              >
                {{ s.companyName }}
              </option>
            </select>
            <span class="ux-select__icon material-symbols-rounded">
              expand_more
            </span>
          </div>
        </div>

        <!-- Tipo documento -->
        <div class="col-lg-6 col-md-6 col-12">
          <label class="form-label mb-1 small text-muted">
            Tipo de documento *
          </label>
          <div class="ux-select">
            <select
              class="form-select ux-input"
              formControlName="tipoDocumento"
            >
              <option value="">Selecciona un tipo</option>
              <option
                *ngFor="let t of documentTypes"
                [value]="t.code"
              >
                {{ t.name }} ({{ t.code }})
              </option>
            </select>
            <span class="ux-select__icon material-symbols-rounded">
              expand_more
            </span>
          </div>
        </div>
      </div>

      <!-- Fila 2: fecha, serie, número (4 / 4 / 4) -->
      <div class="row g-3 mb-3">
        <!-- Fecha documento -->
        <div class="col-lg-4 col-md-4 col-12">
          <label class="form-label mb-1 small text-muted">
            Fecha del documento *
          </label>
          <input
            type="date"
            class="form-control ux-input"
            formControlName="fechaDocumento"
          />
        </div>

        <!-- Serie -->
        <div class="col-lg-4 col-md-4 col-6">
          <label class="form-label mb-1 small text-muted">
            Serie *
          </label>
          <input
            type="text"
            class="form-control ux-input"
            formControlName="serie"
            placeholder="EG07"
          />
        </div>

        <!-- Número correlativo -->
        <div class="col-lg-4 col-md-4 col-6">
          <label class="form-label mb-1 small text-muted">
            Número *
          </label>
          <input
            type="text"
            class="form-control ux-input"
            formControlName="numeroCorrelativo"
            placeholder="0000001"
          />
        </div>
      </div>

      <!-- Fila 3: pesos (4 / 4 / 4 → último queda libre por ahora) -->
      <div class="row g-3">
        <div class="col-lg-4 col-md-4 col-12">
          <label class="form-label mb-1 small text-muted">
            Peso bruto (Kg) *
          </label>
          <input
            type="number"
            class="form-control ux-input"
            formControlName="pesoBrutoKg"
            min="0"
            step="0.01"
            placeholder="0.00"
          />
        </div>

        <div class="col-lg-4 col-md-4 col-12">
          <label class="form-label mb-1 small text-muted">
            Peso neto (Kg) *
          </label>
          <input
            type="number"
            class="form-control ux-input"
            formControlName="pesoNetoKg"
            min="0"
            step="0.01"
            placeholder="0.00"
          />
        </div>

        <!-- Espacio libre para futuro (tara, etc.) -->
        <div class="col-lg-4 col-md-4 d-none d-md-block"></div>
      </div>
    </form>
  </div>

  <div class="modal-footer border-0 pt-0">
    <button
      type="button"
      class="ux-btn ux-btn--blue"
      (click)="cancelar()"
    >
      Cancelar
    </button>

    <button
      type="button"
      class="ux-btn ux-btn--primary"
      (click)="guardar()"
      [disabled]="isSaving"
    >
      <ng-container *ngIf="!isSaving">
        <span class="material-symbols-rounded">save</span>
        <span>Guardar</span>
      </ng-container>
      <ng-container *ngIf="isSaving">
        <span
          class="spinner-border spinner-border-sm me-1"
          role="status"
          aria-hidden="true"
        ></span>
        <span>Guardando…</span>
      </ng-container>
    </button>
  </div>
</div>
